{"ast":null,"code":"/**\r\n * DevExtreme (ui/load_indicator.js)\r\n * Version: 19.2.2\r\n * Build date: Tue Oct 01 2019\r\n *\r\n * Copyright (c) 2012 - 2019 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar $ = require(\"../core/renderer\"),\n  windowUtils = require(\"../core/utils/window\"),\n  navigator = windowUtils.getNavigator(),\n  support = require(\"../core/utils/support\"),\n  themes = require(\"./themes\"),\n  extend = require(\"../core/utils/extend\").extend,\n  devices = require(\"../core/devices\"),\n  registerComponent = require(\"../core/component_registrator\"),\n  Widget = require(\"./widget/ui.widget\");\nvar LOADINDICATOR_CLASS = \"dx-loadindicator\",\n  LOADINDICATOR_WRAPPER_CLASS = \"dx-loadindicator-wrapper\",\n  LOADINDICATOR_CONTENT_CLASS = \"dx-loadindicator-content\",\n  LOADINDICATOR_ICON_CLASS = \"dx-loadindicator-icon\",\n  LOADINDICATOR_SEGMENT_CLASS = \"dx-loadindicator-segment\",\n  LOADINDICATOR_SEGMENT_INNER_CLASS = \"dx-loadindicator-segment-inner\",\n  LOADINDICATOR_IMAGE_CLASS = \"dx-loadindicator-image\";\nvar LoadIndicator = Widget.inherit({\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), {\n      indicatorSrc: \"\",\n      activeStateEnabled: false,\n      hoverStateEnabled: false,\n      _animatingSegmentCount: 1,\n      _animatingSegmentInner: false\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    var themeName = themes.current();\n    return this.callBase().concat([{\n      device: function device() {\n        var realDevice = devices.real(),\n          obsoleteAndroid = \"android\" === realDevice.platform && !/chrome/i.test(navigator.userAgent);\n        return obsoleteAndroid;\n      },\n      options: {\n        viaImage: true\n      }\n    }, {\n      device: function device() {\n        return themes.isIos7(themeName);\n      },\n      options: {\n        _animatingSegmentCount: 11\n      }\n    }, {\n      device: function device() {\n        return themes.isMaterial(themeName);\n      },\n      options: {\n        _animatingSegmentCount: 2,\n        _animatingSegmentInner: true\n      }\n    }, {\n      device: function device() {\n        return themes.isGeneric(themeName);\n      },\n      options: {\n        _animatingSegmentCount: 7\n      }\n    }]);\n  },\n  _init: function _init() {\n    this.callBase();\n    this.$element().addClass(LOADINDICATOR_CLASS);\n  },\n  _initMarkup: function _initMarkup() {\n    this.callBase();\n    this._renderWrapper();\n    this._renderIndicatorContent();\n    this._renderMarkup();\n  },\n  _renderWrapper: function _renderWrapper() {\n    this._$wrapper = $(\"<div>\").addClass(LOADINDICATOR_WRAPPER_CLASS);\n    this.$element().append(this._$wrapper);\n  },\n  _renderIndicatorContent: function _renderIndicatorContent() {\n    this._$content = $(\"<div>\").addClass(LOADINDICATOR_CONTENT_CLASS);\n    this._$wrapper.append(this._$content);\n  },\n  _renderMarkup: function _renderMarkup() {\n    if (support.animation() && !this.option(\"viaImage\") && !this.option(\"indicatorSrc\")) {\n      this._renderMarkupForAnimation();\n    } else {\n      this._renderMarkupForImage();\n    }\n  },\n  _renderMarkupForAnimation: function _renderMarkupForAnimation() {\n    var animatingSegmentInner = this.option(\"_animatingSegmentInner\");\n    this._$indicator = $(\"<div>\").addClass(LOADINDICATOR_ICON_CLASS);\n    this._$content.append(this._$indicator);\n    for (var i = this.option(\"_animatingSegmentCount\"); i >= 0; --i) {\n      var $segment = $(\"<div>\").addClass(LOADINDICATOR_SEGMENT_CLASS).addClass(LOADINDICATOR_SEGMENT_CLASS + i);\n      if (animatingSegmentInner) {\n        $segment.append($(\"<div>\").addClass(LOADINDICATOR_SEGMENT_INNER_CLASS));\n      }\n      this._$indicator.append($segment);\n    }\n  },\n  _renderMarkupForImage: function _renderMarkupForImage() {\n    var indicatorSrc = this.option(\"indicatorSrc\");\n    this._$wrapper.addClass(LOADINDICATOR_IMAGE_CLASS);\n    if (indicatorSrc) {\n      this._$wrapper.css(\"backgroundImage\", \"url(\" + indicatorSrc + \")\");\n    }\n  },\n  _renderDimensions: function _renderDimensions() {\n    this.callBase();\n    this._updateContentSizeForAnimation();\n  },\n  _updateContentSizeForAnimation: function _updateContentSizeForAnimation() {\n    if (!this._$indicator) {\n      return;\n    }\n    var width = this.option(\"width\"),\n      height = this.option(\"height\");\n    if (width || height) {\n      width = this.$element().width();\n      height = this.$element().height();\n      var minDimension = Math.min(height, width);\n      this._$wrapper.css({\n        height: minDimension,\n        width: minDimension,\n        fontSize: minDimension\n      });\n    }\n  },\n  _clean: function _clean() {\n    this.callBase();\n    this._removeMarkupForAnimation();\n    this._removeMarkupForImage();\n  },\n  _removeMarkupForAnimation: function _removeMarkupForAnimation() {\n    if (!this._$indicator) {\n      return;\n    }\n    this._$indicator.remove();\n    delete this._$indicator;\n  },\n  _removeMarkupForImage: function _removeMarkupForImage() {\n    this._$wrapper.css(\"backgroundImage\", \"none\");\n  },\n  _optionChanged: function _optionChanged(args) {\n    switch (args.name) {\n      case \"_animatingSegmentCount\":\n      case \"_animatingSegmentInner\":\n      case \"indicatorSrc\":\n        this._invalidate();\n        break;\n      default:\n        this.callBase(args);\n    }\n  }\n});\nregisterComponent(\"dxLoadIndicator\", LoadIndicator);\nmodule.exports = LoadIndicator;\nmodule.exports.default = module.exports;","map":null,"metadata":{},"sourceType":"script"}