{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.filter_builder.js)\r\n * Version: 19.2.2\r\n * Build date: Tue Oct 01 2019\r\n *\r\n * Copyright (c) 2012 - 2019 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../../core/renderer\");\nvar _renderer2 = _interopRequireDefault(_renderer);\nvar _uiGrid_core = require(\"./ui.grid_core.modules\");\nvar _uiGrid_core2 = _interopRequireDefault(_uiGrid_core);\nvar _extend = require(\"../../core/utils/extend\");\nvar _filter_builder = require(\"./../filter_builder\");\nvar _filter_builder2 = _interopRequireDefault(_filter_builder);\nvar _message = require(\"../../localization/message\");\nvar _message2 = _interopRequireDefault(_message);\nvar _scroll_view = require(\"./../scroll_view\");\nvar _scroll_view2 = _interopRequireDefault(_scroll_view);\nvar _popup = require(\"./../popup\");\nvar _popup2 = _interopRequireDefault(_popup);\nvar _accessibility = require(\"../shared/accessibility\");\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nvar FilterBuilderView = _uiGrid_core2.default.View.inherit({\n  _renderCore: function _renderCore() {\n    this._updatePopupOptions();\n  },\n  _updatePopupOptions: function _updatePopupOptions() {\n    if (this.option(\"filterBuilderPopup.visible\")) {\n      this._initPopup();\n    } else {\n      if (this._filterBuilderPopup) {\n        this._filterBuilderPopup.hide();\n      }\n    }\n  },\n  _disposePopup: function _disposePopup() {\n    if (this._filterBuilderPopup) {\n      this._filterBuilderPopup.dispose();\n      this._filterBuilderPopup = void 0;\n    }\n    if (this._filterBuilder) {\n      this._filterBuilder.dispose();\n      this._filterBuilder = void 0;\n    }\n  },\n  _initPopup: function _initPopup() {\n    var that = this;\n    that._disposePopup();\n    that._filterBuilderPopup = that._createComponent(that.element(), _popup2.default, (0, _extend.extend)({\n      title: _message2.default.format(\"dxDataGrid-filterBuilderPopupTitle\"),\n      contentTemplate: function contentTemplate($contentElement) {\n        return that._getPopupContentTemplate($contentElement);\n      },\n      onOptionChanged: function onOptionChanged(args) {\n        if (\"visible\" === args.name) {\n          that.option(\"filterBuilderPopup.visible\", args.value);\n        }\n      },\n      toolbarItems: that._getPopupToolbarItems()\n    }, that.option(\"filterBuilderPopup\"), {\n      onHidden: function onHidden(e) {\n        (0, _accessibility.restoreFocus)(that);\n        that._disposePopup();\n      }\n    }));\n  },\n  _getPopupContentTemplate: function _getPopupContentTemplate(contentElement) {\n    var $contentElement = (0, _renderer2.default)(contentElement),\n      $filterBuilderContainer = (0, _renderer2.default)(\"<div>\").appendTo((0, _renderer2.default)(contentElement));\n    this._filterBuilder = this._createComponent($filterBuilderContainer, _filter_builder2.default, (0, _extend.extend)({\n      value: this.option(\"filterValue\"),\n      fields: this.getController(\"columns\").getFilteringColumns()\n    }, this.option(\"filterBuilder\"), {\n      customOperations: this.getController(\"filterSync\").getCustomFilterOperations()\n    }));\n    this._createComponent($contentElement, _scroll_view2.default, {\n      direction: \"both\"\n    });\n  },\n  _getPopupToolbarItems: function _getPopupToolbarItems() {\n    var that = this;\n    return [{\n      toolbar: \"bottom\",\n      location: \"after\",\n      widget: \"dxButton\",\n      options: {\n        text: _message2.default.format(\"OK\"),\n        onClick: function onClick(e) {\n          var filter = that._filterBuilder.option(\"value\");\n          that.option(\"filterValue\", filter);\n          that._filterBuilderPopup.hide();\n        }\n      }\n    }, {\n      toolbar: \"bottom\",\n      location: \"after\",\n      widget: \"dxButton\",\n      options: {\n        text: _message2.default.format(\"Cancel\"),\n        onClick: function onClick(e) {\n          that._filterBuilderPopup.hide();\n        }\n      }\n    }];\n  },\n  optionChanged: function optionChanged(args) {\n    switch (args.name) {\n      case \"filterBuilder\":\n      case \"filterBuilderPopup\":\n        this._invalidate();\n        args.handled = true;\n        break;\n      default:\n        this.callBase(args);\n    }\n  }\n});\nmodule.exports = {\n  defaultOptions: function defaultOptions() {\n    return {\n      filterBuilder: {\n        groupOperationDescriptions: {\n          and: _message2.default.format(\"dxFilterBuilder-and\"),\n          or: _message2.default.format(\"dxFilterBuilder-or\"),\n          notAnd: _message2.default.format(\"dxFilterBuilder-notAnd\"),\n          notOr: _message2.default.format(\"dxFilterBuilder-notOr\")\n        },\n        filterOperationDescriptions: {\n          between: _message2.default.format(\"dxFilterBuilder-filterOperationBetween\"),\n          equal: _message2.default.format(\"dxFilterBuilder-filterOperationEquals\"),\n          notEqual: _message2.default.format(\"dxFilterBuilder-filterOperationNotEquals\"),\n          lessThan: _message2.default.format(\"dxFilterBuilder-filterOperationLess\"),\n          lessThanOrEqual: _message2.default.format(\"dxFilterBuilder-filterOperationLessOrEquals\"),\n          greaterThan: _message2.default.format(\"dxFilterBuilder-filterOperationGreater\"),\n          greaterThanOrEqual: _message2.default.format(\"dxFilterBuilder-filterOperationGreaterOrEquals\"),\n          startsWith: _message2.default.format(\"dxFilterBuilder-filterOperationStartsWith\"),\n          contains: _message2.default.format(\"dxFilterBuilder-filterOperationContains\"),\n          notContains: _message2.default.format(\"dxFilterBuilder-filterOperationNotContains\"),\n          endsWith: _message2.default.format(\"dxFilterBuilder-filterOperationEndsWith\"),\n          isBlank: _message2.default.format(\"dxFilterBuilder-filterOperationIsBlank\"),\n          isNotBlank: _message2.default.format(\"dxFilterBuilder-filterOperationIsNotBlank\")\n        }\n      },\n      filterBuilderPopup: {}\n    };\n  },\n  views: {\n    filterBuilderView: FilterBuilderView\n  }\n};","map":null,"metadata":{},"sourceType":"script"}