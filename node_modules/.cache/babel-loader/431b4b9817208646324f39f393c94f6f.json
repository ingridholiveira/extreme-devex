{"ast":null,"code":"/**\r\n * DevExtreme (core/utils/queue.js)\r\n * Version: 19.2.2\r\n * Build date: Tue Oct 01 2019\r\n *\r\n * Copyright (c) 2012 - 2019 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar errors = require(\"../errors\"),\n  when = require(\"../../core/utils/deferred\").when;\nfunction createQueue(discardPendingTasks) {\n  var _tasks = [],\n    _busy = false;\n  function exec() {\n    while (_tasks.length) {\n      _busy = true;\n      var task = _tasks.shift(),\n        result = task();\n      if (void 0 === result) {\n        continue;\n      }\n      if (result.then) {\n        when(result).always(exec);\n        return;\n      }\n      throw errors.Error(\"E0015\");\n    }\n    _busy = false;\n  }\n  function add(task, removeTaskCallback) {\n    if (!discardPendingTasks) {\n      _tasks.push(task);\n    } else {\n      if (_tasks[0] && removeTaskCallback) {\n        removeTaskCallback(_tasks[0]);\n      }\n      _tasks = [task];\n    }\n    if (!_busy) {\n      exec();\n    }\n  }\n  function busy() {\n    return _busy;\n  }\n  return {\n    add: add,\n    busy: busy\n  };\n}\nexports.create = createQueue;\nexports.enqueue = createQueue().add;","map":null,"metadata":{},"sourceType":"script"}