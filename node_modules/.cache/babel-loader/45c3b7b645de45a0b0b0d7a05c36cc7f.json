{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.virtual_columns_core.js)\r\n * Version: 19.2.2\r\n * Build date: Tue Oct 01 2019\r\n *\r\n * Copyright (c) 2012 - 2019 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _extend = require(\"../../core/utils/extend\");\nfunction foreachColumnInfo(info, callback, rowIndex, offsets, columnCount, lastProcessedIndexes) {\n  rowIndex = rowIndex || 0;\n  offsets = offsets || [];\n  lastProcessedIndexes = lastProcessedIndexes || [];\n  offsets[rowIndex] = offsets[rowIndex] || 0;\n  var row = info[rowIndex],\n    startIndex = lastProcessedIndexes[rowIndex] + 1 || 0,\n    processedColumnCount = 0;\n  if (!row) {\n    return;\n  }\n  for (var colIndex = startIndex; colIndex < row.length; colIndex++) {\n    var cell = row[colIndex],\n      visibleIndex = colIndex + offsets[rowIndex],\n      colspan = cell.colspan || 1;\n    foreachColumnInfo(info, callback, rowIndex + (cell.rowspan || 1), offsets, colspan, lastProcessedIndexes);\n    offsets[rowIndex] += colspan - 1;\n    processedColumnCount += colspan;\n    if (cell.rowspan) {\n      for (var i = rowIndex + 1; i < rowIndex + cell.rowspan; i++) {\n        offsets[i] = offsets[i] || 0;\n        offsets[i] += cell.colspan || 1;\n      }\n    }\n    if (false === callback(cell, visibleIndex, rowIndex, colIndex)) {\n      break;\n    }\n    if (void 0 !== columnCount && processedColumnCount >= columnCount) {\n      break;\n    }\n  }\n  lastProcessedIndexes[rowIndex] = colIndex;\n}\nfunction createColumnsInfo(info, startIndex, endIndex) {\n  var newInfo = [];\n  foreachColumnInfo(info, function (columnInfo, visibleIndex, rowIndex) {\n    var colspan,\n      cell = columnInfo,\n      cellColspan = cell.colspan || 1,\n      isVisible = visibleIndex + cellColspan - 1 >= startIndex && visibleIndex < endIndex;\n    newInfo[rowIndex] = newInfo[rowIndex] || [];\n    if (isVisible) {\n      if (visibleIndex < startIndex) {\n        colspan = cellColspan - (startIndex - visibleIndex);\n        visibleIndex = startIndex;\n      } else {\n        colspan = cellColspan;\n      }\n      if (visibleIndex + colspan > endIndex) {\n        colspan = endIndex - visibleIndex;\n      }\n      if (colspan !== cellColspan) {\n        cell = (0, _extend.extend)({}, cell, {\n          colspan: colspan\n        });\n      }\n      newInfo[rowIndex].push(cell);\n    } else {\n      if (visibleIndex > endIndex) {\n        return false;\n      }\n    }\n  });\n  for (var i = 0; i < newInfo.length; i++) {\n    newInfo[i] = newInfo[i] || [];\n  }\n  return newInfo;\n}\nexports.foreachColumnInfo = foreachColumnInfo;\nexports.createColumnsInfo = createColumnsInfo;","map":null,"metadata":{},"sourceType":"script"}