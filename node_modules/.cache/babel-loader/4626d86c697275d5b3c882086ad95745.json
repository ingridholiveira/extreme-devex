{"ast":null,"code":"/**\r\n * DevExtreme (events/double_click.js)\r\n * Version: 19.2.2\r\n * Build date: Tue Oct 01 2019\r\n *\r\n * Copyright (c) 2012 - 2019 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar eventsEngine = require(\"../events/core/events_engine\"),\n  domUtils = require(\"../core/utils/dom\"),\n  domAdapter = require(\"../core/dom_adapter\"),\n  Class = require(\"../core/class\"),\n  registerEvent = require(\"./core/event_registrator\"),\n  clickEvent = require(\"./click\"),\n  eventUtils = require(\"./utils\");\nvar DBLCLICK_EVENT_NAME = \"dxdblclick\",\n  DBLCLICK_NAMESPACE = \"dxDblClick\",\n  NAMESPACED_CLICK_EVENT = eventUtils.addNamespace(clickEvent.name, DBLCLICK_NAMESPACE),\n  DBLCLICK_TIMEOUT = 300;\nvar DblClick = Class.inherit({\n  ctor: function ctor() {\n    this._handlerCount = 0;\n    this._forgetLastClick();\n  },\n  _forgetLastClick: function _forgetLastClick() {\n    this._firstClickTarget = null;\n    this._lastClickTimeStamp = -DBLCLICK_TIMEOUT;\n  },\n  add: function add() {\n    if (this._handlerCount <= 0) {\n      eventsEngine.on(domAdapter.getDocument(), NAMESPACED_CLICK_EVENT, this._clickHandler.bind(this));\n    }\n    this._handlerCount++;\n  },\n  _clickHandler: function _clickHandler(e) {\n    var timeStamp = e.timeStamp || Date.now();\n    if (timeStamp - this._lastClickTimeStamp < DBLCLICK_TIMEOUT) {\n      eventUtils.fireEvent({\n        type: DBLCLICK_EVENT_NAME,\n        target: domUtils.closestCommonParent(this._firstClickTarget, e.target),\n        originalEvent: e\n      });\n      this._forgetLastClick();\n    } else {\n      this._firstClickTarget = e.target;\n      this._lastClickTimeStamp = timeStamp;\n    }\n  },\n  remove: function remove() {\n    this._handlerCount--;\n    if (this._handlerCount <= 0) {\n      this._forgetLastClick();\n      eventsEngine.off(domAdapter.getDocument(), NAMESPACED_CLICK_EVENT);\n    }\n  }\n});\nregisterEvent(DBLCLICK_EVENT_NAME, new DblClick());\nexports.name = DBLCLICK_EVENT_NAME;","map":null,"metadata":{},"sourceType":"script"}