{"ast":null,"code":"/**\r\n * DevExtreme (ui/tab_panel.js)\r\n * Version: 19.2.2\r\n * Build date: Tue Oct 01 2019\r\n *\r\n * Copyright (c) 2012 - 2019 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _renderer = require(\"../core/renderer\");\nvar _renderer2 = _interopRequireDefault(_renderer);\nvar _support = require(\"../core/utils/support\");\nvar _support2 = _interopRequireDefault(_support);\nvar _extend = require(\"../core/utils/extend\");\nvar _devices = require(\"../core/devices\");\nvar _devices2 = _interopRequireDefault(_devices);\nvar _component_registrator = require(\"../core/component_registrator\");\nvar _component_registrator2 = _interopRequireDefault(_component_registrator);\nvar _multi_view = require(\"./multi_view\");\nvar _multi_view2 = _interopRequireDefault(_multi_view);\nvar _tabs = require(\"./tabs\");\nvar _tabs2 = _interopRequireDefault(_tabs);\nvar _item = require(\"./tab_panel/item\");\nvar _item2 = _interopRequireDefault(_item);\nvar _icon = require(\"../core/utils/icon\");\nvar _icon2 = _interopRequireDefault(_icon);\nvar _dom = require(\"../core/utils/dom\");\nvar _bindable_template = require(\"../core/templates/bindable_template\");\nvar _window = require(\"../core/utils/window\");\nvar _window2 = _interopRequireDefault(_window);\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\nvar TABPANEL_CLASS = \"dx-tabpanel\";\nvar TABPANEL_TABS_CLASS = \"dx-tabpanel-tabs\";\nvar TABPANEL_CONTAINER_CLASS = \"dx-tabpanel-container\";\nvar TABS_ITEM_TEXT_CLASS = \"dx-tab-text\";\nvar TabPanel = _multi_view2.default.inherit({\n  _getDefaultOptions: function _getDefaultOptions() {\n    return (0, _extend.extend)(this.callBase(), {\n      itemTitleTemplate: \"title\",\n      hoverStateEnabled: true,\n      showNavButtons: false,\n      scrollByContent: true,\n      scrollingEnabled: true,\n      onTitleClick: null,\n      onTitleHold: null,\n      onTitleRendered: null,\n      badgeExpr: function badgeExpr(data) {\n        return data ? data.badge : void 0;\n      }\n    });\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: function device() {\n        return \"desktop\" === _devices2.default.real().deviceType && !_devices2.default.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }, {\n      device: function device() {\n        return !_support2.default.touch;\n      },\n      options: {\n        swipeEnabled: false\n      }\n    }, {\n      device: {\n        platform: \"generic\"\n      },\n      options: {\n        animationEnabled: false\n      }\n    }]);\n  },\n  _init: function _init() {\n    this.callBase();\n    this.$element().addClass(TABPANEL_CLASS);\n    this.setAria(\"role\", \"tabpanel\");\n  },\n  _initMarkup: function _initMarkup() {\n    this.callBase();\n    this._createTitleActions();\n    this._renderLayout();\n  },\n  _initTemplates: function _initTemplates() {\n    this.callBase();\n    this._defaultTemplates.title = new _bindable_template.BindableTemplate(function ($container, data) {\n      $container.text(data.title || String(data));\n      var $iconElement = _icon2.default.getImageContainer(data.icon);\n      $container.wrapInner((0, _renderer2.default)(\"<span>\").addClass(TABS_ITEM_TEXT_CLASS));\n      $iconElement && $iconElement.prependTo($container);\n    }, [\"title\", \"icon\"], this.option(\"integrationOptions.watchMethod\"));\n  },\n  _createTitleActions: function _createTitleActions() {\n    this._createTitleClickAction();\n    this._createTitleHoldAction();\n    this._createTitleRenderedAction();\n  },\n  _createTitleClickAction: function _createTitleClickAction() {\n    this._titleClickAction = this._createActionByOption(\"onTitleClick\");\n  },\n  _createTitleHoldAction: function _createTitleHoldAction() {\n    this._titleHoldAction = this._createActionByOption(\"onTitleHold\");\n  },\n  _createTitleRenderedAction: function _createTitleRenderedAction() {\n    this._titleRenderedAction = this._createActionByOption(\"onTitleRendered\");\n  },\n  _renderContent: function _renderContent() {\n    var that = this;\n    this.callBase();\n    if (this.option(\"templatesRenderAsynchronously\")) {\n      this._resizeEventTimer = setTimeout(function () {\n        that._updateLayout();\n      }, 0);\n    }\n  },\n  _renderLayout: function _renderLayout() {\n    if (this._tabs) {\n      return;\n    }\n    var $element = this.$element();\n    this._$tabContainer = (0, _renderer2.default)(\"<div>\").addClass(TABPANEL_TABS_CLASS).appendTo($element);\n    var $tabs = (0, _renderer2.default)(\"<div>\").appendTo(this._$tabContainer);\n    this._tabs = this._createComponent($tabs, _tabs2.default, this._tabConfig());\n    this._$container = (0, _renderer2.default)(\"<div>\").addClass(TABPANEL_CONTAINER_CLASS).appendTo($element);\n    this._$container.append(this._$wrapper);\n    this._updateLayout();\n  },\n  _updateLayout: function _updateLayout() {\n    if (_window2.default.hasWindow()) {\n      var tabsHeight = this._$tabContainer.outerHeight();\n      this._$container.css({\n        marginTop: -tabsHeight,\n        paddingTop: tabsHeight\n      });\n    }\n  },\n  _refreshActiveDescendant: function _refreshActiveDescendant() {\n    if (!this._tabs) {\n      return;\n    }\n    var tabs = this._tabs,\n      tabItems = tabs.itemElements(),\n      $activeTab = (0, _renderer2.default)(tabItems[tabs.option(\"selectedIndex\")]),\n      id = this.getFocusedItemId();\n    this.setAria(\"controls\", void 0, (0, _renderer2.default)(tabItems));\n    this.setAria(\"controls\", id, $activeTab);\n  },\n  _tabConfig: function _tabConfig() {\n    return {\n      selectOnFocus: true,\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      hoverStateEnabled: this.option(\"hoverStateEnabled\"),\n      repaintChangesOnly: this.option(\"repaintChangesOnly\"),\n      tabIndex: this.option(\"tabIndex\"),\n      selectedIndex: this.option(\"selectedIndex\"),\n      badgeExpr: this.option(\"badgeExpr\"),\n      onItemClick: this._titleClickAction.bind(this),\n      onItemHold: this._titleHoldAction.bind(this),\n      itemHoldTimeout: this.option(\"itemHoldTimeout\"),\n      onSelectionChanged: function (e) {\n        this.option(\"selectedIndex\", e.component.option(\"selectedIndex\"));\n        this._refreshActiveDescendant();\n      }.bind(this),\n      onItemRendered: this._titleRenderedAction.bind(this),\n      itemTemplate: this._getTemplateByOption(\"itemTitleTemplate\"),\n      items: this.option(\"items\"),\n      noDataText: null,\n      scrollingEnabled: this.option(\"scrollingEnabled\"),\n      scrollByContent: this.option(\"scrollByContent\"),\n      showNavButtons: this.option(\"showNavButtons\"),\n      itemTemplateProperty: \"tabTemplate\",\n      loopItemFocus: this.option(\"loop\"),\n      selectionRequired: true,\n      onOptionChanged: function (args) {\n        if (\"focusedElement\" === args.name) {\n          if (args.value) {\n            var $value = (0, _renderer2.default)(args.value);\n            var $newItem = this._itemElements().eq($value.index());\n            this.option(\"focusedElement\", (0, _dom.getPublicElement)($newItem));\n          } else {\n            this.option(\"focusedElement\", args.value);\n          }\n        }\n      }.bind(this),\n      onFocusIn: function (args) {\n        this._focusInHandler(args.event);\n      }.bind(this),\n      onFocusOut: function (args) {\n        this._focusOutHandler(args.event);\n      }.bind(this)\n    };\n  },\n  _renderFocusTarget: function _renderFocusTarget() {\n    this._focusTarget().attr(\"tabIndex\", -1);\n    this._refreshActiveDescendant();\n  },\n  _updateFocusState: function _updateFocusState(e, isFocused) {\n    this.callBase(e, isFocused);\n    if (e.target === this._tabs._focusTarget().get(0)) {\n      this._toggleFocusClass(isFocused, this._focusTarget());\n    }\n  },\n  _setTabsOption: function _setTabsOption(name, value) {\n    if (this._tabs) {\n      this._tabs.option(name, value);\n    }\n  },\n  _visibilityChanged: function _visibilityChanged(visible) {\n    if (visible) {\n      this._tabs._dimensionChanged();\n      this._updateLayout();\n    }\n  },\n  registerKeyHandler: function registerKeyHandler(key, handler) {\n    this.callBase(key, handler);\n    if (this._tabs) {\n      this._tabs.registerKeyHandler(key, handler);\n    }\n  },\n  repaint: function repaint() {\n    this.callBase();\n    this._tabs.repaint();\n  },\n  _optionChanged: function _optionChanged(args) {\n    var name = args.name,\n      value = args.value,\n      fullName = args.fullName;\n    switch (name) {\n      case \"dataSource\":\n        this.callBase(args);\n        break;\n      case \"items\":\n        this._setTabsOption(fullName, value);\n        this._updateLayout();\n        if (!this.option(\"repaintChangesOnly\")) {\n          this._tabs.repaint();\n        }\n        this.callBase(args);\n        break;\n      case \"width\":\n        this.callBase(args);\n        this._tabs.repaint();\n        break;\n      case \"selectedIndex\":\n      case \"selectedItem\":\n      case \"itemHoldTimeout\":\n      case \"focusStateEnabled\":\n      case \"hoverStateEnabled\":\n        this._setTabsOption(fullName, value);\n        this.callBase(args);\n        break;\n      case \"scrollingEnabled\":\n      case \"scrollByContent\":\n      case \"showNavButtons\":\n        this._setTabsOption(fullName, value);\n        break;\n      case \"focusedElement\":\n        var id = value ? (0, _renderer2.default)(value).index() : value;\n        var newItem = value ? this._tabs._itemElements().eq(id) : value;\n        this._setTabsOption(\"focusedElement\", (0, _dom.getPublicElement)(newItem));\n        this.callBase(args);\n        break;\n      case \"itemTitleTemplate\":\n        this._setTabsOption(\"itemTemplate\", this._getTemplateByOption(\"itemTitleTemplate\"));\n        break;\n      case \"onTitleClick\":\n        this._createTitleClickAction();\n        this._setTabsOption(\"onItemClick\", this._titleClickAction.bind(this));\n        break;\n      case \"onTitleHold\":\n        this._createTitleHoldAction();\n        this._setTabsOption(\"onItemHold\", this._titleHoldAction.bind(this));\n        break;\n      case \"onTitleRendered\":\n        this._createTitleRenderedAction();\n        this._setTabsOption(\"onItemRendered\", this._titleRenderedAction.bind(this));\n        break;\n      case \"loop\":\n        this._setTabsOption(\"loopItemFocus\", value);\n        break;\n      case \"badgeExpr\":\n        this._invalidate();\n        break;\n      default:\n        this.callBase(args);\n    }\n  },\n  _clean: function _clean() {\n    clearTimeout(this._resizeEventTimer);\n    this.callBase();\n  }\n});\nTabPanel.ItemClass = _item2.default;\n(0, _component_registrator2.default)(\"dxTabPanel\", TabPanel);\nmodule.exports = TabPanel;\nmodule.exports.default = module.exports;","map":null,"metadata":{},"sourceType":"script"}