{"ast":null,"code":"/**\r\n * DevExtreme (events/pointer/touch.js)\r\n * Version: 19.2.2\r\n * Build date: Tue Oct 01 2019\r\n *\r\n * Copyright (c) 2012 - 2019 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar devices = require(\"../../core/devices\"),\n  extend = require(\"../../core/utils/extend\").extend,\n  each = require(\"../../core/utils/iterator\").each,\n  BaseStrategy = require(\"./base\");\nvar eventMap = {\n  dxpointerdown: \"touchstart\",\n  dxpointermove: \"touchmove\",\n  dxpointerup: \"touchend\",\n  dxpointercancel: \"touchcancel\",\n  dxpointerover: \"\",\n  dxpointerout: \"\",\n  dxpointerenter: \"\",\n  dxpointerleave: \"\"\n};\nvar normalizeTouchEvent = function normalizeTouchEvent(e) {\n  var pointers = [];\n  each(e.touches, function (_, touch) {\n    pointers.push(extend({\n      pointerId: touch.identifier\n    }, touch));\n  });\n  return {\n    pointers: pointers,\n    pointerId: e.changedTouches[0].identifier\n  };\n};\nvar skipTouchWithSameIdentifier = function skipTouchWithSameIdentifier(pointerEvent) {\n  return \"ios\" === devices.real().platform && (\"dxpointerdown\" === pointerEvent || \"dxpointerup\" === pointerEvent);\n};\nvar TouchStrategy = BaseStrategy.inherit({\n  ctor: function ctor() {\n    this.callBase.apply(this, arguments);\n    this._pointerId = 0;\n  },\n  _handler: function _handler(e) {\n    if (skipTouchWithSameIdentifier(this._eventName)) {\n      var touch = e.changedTouches[0];\n      if (this._pointerId === touch.identifier && 0 !== this._pointerId) {\n        return;\n      }\n      this._pointerId = touch.identifier;\n    }\n    return this.callBase.apply(this, arguments);\n  },\n  _fireEvent: function _fireEvent(args) {\n    return this.callBase(extend(normalizeTouchEvent(args.originalEvent), args));\n  }\n});\nTouchStrategy.map = eventMap;\nTouchStrategy.normalize = normalizeTouchEvent;\nmodule.exports = TouchStrategy;","map":null,"metadata":{},"sourceType":"script"}