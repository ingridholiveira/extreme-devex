{"ast":null,"code":"/**\r\n * DevExtreme (ui/drop_down_editor/ui.drop_down_list.js)\r\n * Version: 19.2.2\r\n * Build date: Tue Oct 01 2019\r\n *\r\n * Copyright (c) 2012 - 2019 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar _typeof = \"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\nvar $ = require(\"../../core/renderer\"),\n  window = require(\"../../core/utils/window\").getWindow(),\n  eventsEngine = require(\"../../events/core/events_engine\"),\n  Guid = require(\"../../core/guid\"),\n  registerComponent = require(\"../../core/component_registrator\"),\n  commonUtils = require(\"../../core/utils/common\"),\n  typeUtils = require(\"../../core/utils/type\"),\n  extend = require(\"../../core/utils/extend\").extend,\n  inArray = require(\"../../core/utils/array\").inArray,\n  DropDownEditor = require(\"./ui.drop_down_editor\"),\n  List = require(\"../list\"),\n  errors = require(\"../widget/ui.errors\"),\n  eventUtils = require(\"../../events/utils\"),\n  devices = require(\"../../core/devices\"),\n  dataQuery = require(\"../../data/query\"),\n  each = require(\"../../core/utils/iterator\").each,\n  DataExpressionMixin = require(\"../editor/ui.data_expression\"),\n  messageLocalization = require(\"../../localization/message\"),\n  ChildDefaultTemplate = require(\"../../core/templates/child_default_template\").ChildDefaultTemplate,\n  Deferred = require(\"../../core/utils/deferred\").Deferred,\n  DataConverterMixin = require(\"../shared/grouped_data_converter_mixin\").default;\nvar LIST_ITEM_SELECTOR = \".dx-list-item\",\n  LIST_ITEM_DATA_KEY = \"dxListItemData\",\n  DROPDOWNLIST_POPUP_WRAPPER_CLASS = \"dx-dropdownlist-popup-wrapper\",\n  SKIP_GESTURE_EVENT_CLASS = \"dx-skip-gesture-event\",\n  SEARCH_EVENT = \"input\",\n  SEARCH_MODES = [\"startswith\", \"contains\", \"endwith\", \"notcontains\"];\nvar DropDownList = DropDownEditor.inherit({\n  _supportedKeys: function _supportedKeys() {\n    var parent = this.callBase();\n    return extend({}, parent, {\n      tab: function tab(e) {\n        if (this._allowSelectItemByTab()) {\n          this._saveValueChangeEvent(e);\n          var $focusedItem = $(this._list.option(\"focusedElement\"));\n          $focusedItem.length && this._setSelectedElement($focusedItem);\n        }\n        parent.tab.apply(this, arguments);\n      },\n      space: commonUtils.noop,\n      home: commonUtils.noop,\n      end: commonUtils.noop\n    });\n  },\n  _allowSelectItemByTab: function _allowSelectItemByTab() {\n    return this.option(\"opened\") && \"instantly\" === this.option(\"applyValueMode\");\n  },\n  _setSelectedElement: function _setSelectedElement($element) {\n    var value = this._valueGetter(this._list._getItemData($element));\n    this._setValue(value);\n  },\n  _setValue: function _setValue(value) {\n    this.option(\"value\", value);\n  },\n  _getDefaultOptions: function _getDefaultOptions() {\n    return extend(this.callBase(), extend(DataExpressionMixin._dataExpressionDefaultOptions(), {\n      displayValue: void 0,\n      searchEnabled: false,\n      searchMode: \"contains\",\n      searchTimeout: 500,\n      minSearchLength: 0,\n      searchExpr: null,\n      valueChangeEvent: \"input change keyup\",\n      selectedItem: null,\n      noDataText: messageLocalization.format(\"dxCollectionWidget-noDataText\"),\n      onSelectionChanged: null,\n      onItemClick: commonUtils.noop,\n      showDataBeforeSearch: false,\n      grouped: false,\n      groupTemplate: \"group\",\n      popupPosition: {\n        my: \"left top\",\n        at: \"left bottom\",\n        offset: {\n          h: 0,\n          v: 0\n        },\n        collision: \"flip\"\n      },\n      wrapItemText: false,\n      popupWidthExtension: 0\n    }));\n  },\n  _defaultOptionsRules: function _defaultOptionsRules() {\n    return this.callBase().concat([{\n      device: {\n        platform: \"ios\"\n      },\n      options: {\n        popupPosition: {\n          offset: {\n            v: -1\n          }\n        }\n      }\n    }, {\n      device: {\n        platform: \"generic\"\n      },\n      options: {\n        buttonsLocation: \"bottom center\"\n      }\n    }]);\n  },\n  _setOptionsByReference: function _setOptionsByReference() {\n    this.callBase();\n    extend(this._optionsByReference, {\n      value: true,\n      selectedItem: true,\n      displayValue: true\n    });\n  },\n  _init: function _init() {\n    this.callBase();\n    this._initDataExpressions();\n    this._initActions();\n    this._setListDataSource();\n    this._validateSearchMode();\n    this._clearSelectedItem();\n    this._initItems();\n  },\n  _initItems: function _initItems() {\n    var items = this.option().items;\n    if (items && !items.length && this._dataSource) {\n      this.option().items = this._dataSource.items();\n    }\n  },\n  _initActions: function _initActions() {\n    this._initContentReadyAction();\n    this._initSelectionChangedAction();\n    this._initItemClickAction();\n  },\n  _initContentReadyAction: function _initContentReadyAction() {\n    this._contentReadyAction = this._createActionByOption(\"onContentReady\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n  },\n  _initSelectionChangedAction: function _initSelectionChangedAction() {\n    this._selectionChangedAction = this._createActionByOption(\"onSelectionChanged\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n  },\n  _initItemClickAction: function _initItemClickAction() {\n    this._itemClickAction = this._createActionByOption(\"onItemClick\");\n  },\n  _initTemplates: function _initTemplates() {\n    this.callBase();\n    this._defaultTemplates.item = new ChildDefaultTemplate(\"item\");\n  },\n  _saveFocusOnWidget: function _saveFocusOnWidget(e) {\n    if (this._list && this._list.initialOption(\"focusStateEnabled\")) {\n      this._focusInput();\n    }\n  },\n  _fitIntoRange: function _fitIntoRange(value, start, end) {\n    if (value > end) {\n      return start;\n    }\n    if (value < start) {\n      return end;\n    }\n    return value;\n  },\n  _items: function _items() {\n    var items = this._getPlainItems(!this._list && this._dataSource.items());\n    var availableItems = new dataQuery(items).filter(\"disabled\", \"<>\", true).toArray();\n    return availableItems;\n  },\n  _calcNextItem: function _calcNextItem(step) {\n    var items = this._items();\n    var nextIndex = this._fitIntoRange(this._getSelectedIndex() + step, 0, items.length - 1);\n    return items[nextIndex];\n  },\n  _getSelectedIndex: function _getSelectedIndex() {\n    var items = this._items();\n    var selectedItem = this.option(\"selectedItem\");\n    var result = -1;\n    each(items, function (index, item) {\n      if (this._isValueEquals(item, selectedItem)) {\n        result = index;\n        return false;\n      }\n    }.bind(this));\n    return result;\n  },\n  _createPopup: function _createPopup() {\n    this.callBase();\n    this._updateCustomBoundaryContainer();\n    this._popup._wrapper().addClass(this._popupWrapperClass());\n    var $popupContent = this._popup.$content();\n    eventsEngine.off($popupContent, \"mouseup\");\n    eventsEngine.on($popupContent, \"mouseup\", this._saveFocusOnWidget.bind(this));\n  },\n  _updateCustomBoundaryContainer: function _updateCustomBoundaryContainer() {\n    var customContainer = this.option(\"dropDownOptions.container\");\n    var $container = customContainer && $(customContainer);\n    if ($container && !typeUtils.isWindow($container.get(0))) {\n      var $containerWithParents = [].slice.call($container.parents());\n      $containerWithParents.unshift($container.get(0));\n      each($containerWithParents, function (i, parent) {\n        if (parent === $(\"body\").get(0)) {\n          return false;\n        } else {\n          if (\"hidden\" === window.getComputedStyle(parent).overflowY) {\n            this._$customBoundaryContainer = $(parent);\n            return false;\n          }\n        }\n      }.bind(this));\n    }\n  },\n  _popupWrapperClass: function _popupWrapperClass() {\n    return DROPDOWNLIST_POPUP_WRAPPER_CLASS;\n  },\n  _renderInputValue: function _renderInputValue() {\n    var value = this._getCurrentValue();\n    return this._loadInputValue(value, this._setSelectedItem.bind(this)).always(this.callBase.bind(this, value));\n  },\n  _loadInputValue: function _loadInputValue(value, callback) {\n    return this._loadItem(value).always(callback);\n  },\n  _loadItem: function _loadItem(value, cache) {\n    var plainItems, selectedItem;\n    if (cache && \"object\" !== (\"undefined\" === typeof value ? \"undefined\" : _typeof(value))) {\n      if (!cache.itemByValue) {\n        cache.itemByValue = {};\n        plainItems = this._getPlainItems();\n        plainItems.forEach(function (item) {\n          cache.itemByValue[this._valueGetter(item)] = item;\n        }, this);\n      }\n      selectedItem = cache.itemByValue[value];\n    }\n    if (!selectedItem) {\n      plainItems = this._getPlainItems();\n      selectedItem = commonUtils.grep(plainItems, function (item) {\n        return this._isValueEquals(this._valueGetter(item), value);\n      }.bind(this))[0];\n    }\n    return void 0 !== selectedItem ? new Deferred().resolve(selectedItem).promise() : this._loadValue(value);\n  },\n  _getPlainItems: function _getPlainItems(items) {\n    var plainItems = [];\n    items = items || this.option(\"items\") || [];\n    for (var i = 0; i < items.length; i++) {\n      if (items[i] && items[i].items) {\n        plainItems = plainItems.concat(items[i].items);\n      } else {\n        plainItems.push(items[i]);\n      }\n    }\n    return plainItems;\n  },\n  _setSelectedItem: function _setSelectedItem(item) {\n    var displayValue = this._displayValue(item);\n    this.option(\"selectedItem\", commonUtils.ensureDefined(item, null));\n    this.option(\"displayValue\", displayValue);\n  },\n  _displayValue: function _displayValue(item) {\n    return this._displayGetter(item);\n  },\n  _refreshSelected: function _refreshSelected() {\n    var cache = {};\n    this._listItemElements().each(function (_, itemElement) {\n      var $itemElement = $(itemElement);\n      var itemValue = this._valueGetter($itemElement.data(LIST_ITEM_DATA_KEY));\n      var isItemSelected = this._isSelectedValue(itemValue, cache);\n      if (isItemSelected) {\n        this._list.selectItem($itemElement);\n      } else {\n        this._list.unselectItem($itemElement);\n      }\n    }.bind(this));\n  },\n  _popupShownHandler: function _popupShownHandler() {\n    this.callBase();\n    this._setFocusPolicy();\n  },\n  _setFocusPolicy: function _setFocusPolicy() {\n    if (!this.option(\"focusStateEnabled\") || !this._list) {\n      return;\n    }\n    this._list.option(\"focusedElement\", null);\n  },\n  _isSelectedValue: function _isSelectedValue(value) {\n    return this._isValueEquals(value, this.option(\"value\"));\n  },\n  _validateSearchMode: function _validateSearchMode() {\n    var searchMode = this.option(\"searchMode\"),\n      normalizedSearchMode = searchMode.toLowerCase();\n    if (inArray(normalizedSearchMode, SEARCH_MODES) < 0) {\n      throw errors.Error(\"E1019\", searchMode);\n    }\n  },\n  _clearSelectedItem: function _clearSelectedItem() {\n    this.option(\"selectedItem\", null);\n  },\n  _processDataSourceChanging: function _processDataSourceChanging() {\n    this._setListDataSource();\n    this._renderInputValue().fail(function () {\n      if (this._isCustomValueAllowed()) {\n        return;\n      }\n      this._clearSelectedItem();\n    }.bind(this));\n  },\n  _isCustomValueAllowed: function _isCustomValueAllowed() {\n    return this.option(\"displayCustomValue\");\n  },\n  reset: function reset() {\n    this.callBase();\n    this._clearFilter();\n    this._clearSelectedItem();\n  },\n  _listItemElements: function _listItemElements() {\n    return this._$list ? this._$list.find(LIST_ITEM_SELECTOR) : $();\n  },\n  _popupConfig: function _popupConfig() {\n    var that = this;\n    return extend(this.callBase(), {\n      templatesRenderAsynchronously: false,\n      width: this.option(\"width\"),\n      onShowing: function onShowing() {\n        that.$element().addClass(SKIP_GESTURE_EVENT_CLASS);\n      },\n      onHidden: function onHidden() {\n        that.$element().removeClass(SKIP_GESTURE_EVENT_CLASS);\n      },\n      height: \"auto\",\n      autoResizeEnabled: false,\n      maxHeight: this._getMaxHeight.bind(this)\n    });\n  },\n  _renderPopupContent: function _renderPopupContent() {\n    this._renderList();\n  },\n  _attachChildKeyboardEvents: function _attachChildKeyboardEvents() {\n    if (!this._canListHaveFocus()) {\n      this._childKeyboardProcessor = this._keyboardProcessor.attachChildProcessor();\n      this._setListOption(\"_keyboardProcessor\", this._childKeyboardProcessor);\n    }\n  },\n  _fireContentReadyAction: commonUtils.noop,\n  _setAriaTargetForList: function _setAriaTargetForList() {\n    this._list._getAriaTarget = this._getAriaTarget.bind(this);\n  },\n  _renderList: function _renderList() {\n    this._listId = \"dx-\" + new Guid()._value;\n    var $list = this._$list = $(\"<div>\").attr(\"id\", this._listId).appendTo(this._popup.$content());\n    this._list = this._createComponent($list, List, this._listConfig());\n    this._refreshList();\n    this._setAriaTargetForList();\n    this._list.option(\"_listAttributes\", {\n      role: \"combobox\"\n    });\n    this._renderPreventBlur(this._$list);\n  },\n  _renderPreventBlur: function _renderPreventBlur($target) {\n    var eventName = eventUtils.addNamespace(\"mousedown\", \"dxDropDownList\");\n    eventsEngine.off($target, eventName);\n    eventsEngine.on($target, eventName, function (e) {\n      e.preventDefault();\n    }.bind(this));\n  },\n  _renderOpenedState: function _renderOpenedState() {\n    this.callBase();\n    var opened = this.option(\"opened\") || void 0;\n    this.setAria({\n      activedescendant: opened && this._list.getFocusedItemId(),\n      controls: opened && this._listId\n    });\n  },\n  _setDefaultAria: function _setDefaultAria() {\n    this.setAria({\n      haspopup: \"listbox\",\n      autocomplete: \"list\"\n    });\n  },\n  _refreshList: function _refreshList() {\n    if (this._list && this._shouldRefreshDataSource()) {\n      this._setListDataSource();\n    }\n  },\n  _shouldRefreshDataSource: function _shouldRefreshDataSource() {\n    var dataSourceProvided = !!this._list.option(\"dataSource\");\n    return dataSourceProvided !== this._needPassDataSourceToList();\n  },\n  _isDesktopDevice: function _isDesktopDevice() {\n    return \"desktop\" === devices.real().deviceType;\n  },\n  _listConfig: function _listConfig() {\n    var options = {\n      selectionMode: \"single\",\n      _templates: this.option(\"_templates\"),\n      templateProvider: this.option(\"templateProvider\"),\n      noDataText: this.option(\"noDataText\"),\n      grouped: this.option(\"grouped\"),\n      wrapItemText: this.option(\"wrapItemText\"),\n      onContentReady: this._listContentReadyHandler.bind(this),\n      itemTemplate: this.option(\"itemTemplate\"),\n      indicateLoading: false,\n      keyExpr: this._getCollectionKeyExpr(),\n      displayExpr: this._displayGetterExpr(),\n      groupTemplate: this.option(\"groupTemplate\"),\n      onItemClick: this._listItemClickAction.bind(this),\n      dataSource: this._getDataSource(),\n      _keyboardProcessor: this._childKeyboardProcessor,\n      hoverStateEnabled: this._isDesktopDevice() ? this.option(\"hoverStateEnabled\") : false,\n      focusStateEnabled: this._isDesktopDevice() ? this.option(\"focusStateEnabled\") : false\n    };\n    if (!this._canListHaveFocus()) {\n      options.tabIndex = null;\n      options._keyboardProcessor = this._childKeyboardProcessor;\n    }\n    return options;\n  },\n  _canListHaveFocus: function _canListHaveFocus() {\n    return false;\n  },\n  _getDataSource: function _getDataSource() {\n    return this._needPassDataSourceToList() ? this._dataSource : null;\n  },\n  _dataSourceOptions: function _dataSourceOptions() {\n    return {\n      paginate: false\n    };\n  },\n  _getGroupedOption: function _getGroupedOption() {\n    return this.option(\"grouped\");\n  },\n  _dataSourceFromUrlLoadMode: function _dataSourceFromUrlLoadMode() {\n    return \"raw\";\n  },\n  _listContentReadyHandler: function _listContentReadyHandler() {\n    this._list = this._list || this._$list.dxList(\"instance\");\n    if (!this.option(\"deferRendering\")) {\n      this._refreshSelected();\n    }\n    this._dimensionChanged();\n    this._contentReadyAction();\n  },\n  _setListOption: function _setListOption(optionName, value) {\n    this._setWidgetOption(\"_list\", arguments);\n  },\n  _listItemClickAction: function _listItemClickAction(e) {\n    this._listItemClickHandler(e);\n    this._itemClickAction(e);\n  },\n  _listItemClickHandler: commonUtils.noop,\n  _setListDataSource: function _setListDataSource() {\n    if (!this._list) {\n      return;\n    }\n    this._setListOption(\"dataSource\", this._getDataSource());\n    if (!this._needPassDataSourceToList()) {\n      this._setListOption(\"items\", []);\n    }\n  },\n  _needPassDataSourceToList: function _needPassDataSourceToList() {\n    return this.option(\"showDataBeforeSearch\") || this._isMinSearchLengthExceeded();\n  },\n  _isMinSearchLengthExceeded: function _isMinSearchLengthExceeded() {\n    return this._searchValue().toString().length >= this.option(\"minSearchLength\");\n  },\n  _searchValue: function _searchValue() {\n    return this._input().val() || \"\";\n  },\n  _getSearchEvent: function _getSearchEvent() {\n    return eventUtils.addNamespace(SEARCH_EVENT, this.NAME + \"Search\");\n  },\n  _getSetFocusPolicyEvent: function _getSetFocusPolicyEvent() {\n    return eventUtils.addNamespace(\"input\", this.NAME + \"FocusPolicy\");\n  },\n  _renderEvents: function _renderEvents() {\n    this.callBase();\n    eventsEngine.on(this._input(), this._getSetFocusPolicyEvent(), this._setFocusPolicy.bind(this));\n    if (this._shouldRenderSearchEvent()) {\n      eventsEngine.on(this._input(), this._getSearchEvent(), this._searchHandler.bind(this));\n    }\n  },\n  _shouldRenderSearchEvent: function _shouldRenderSearchEvent() {\n    return this.option(\"searchEnabled\");\n  },\n  _refreshEvents: function _refreshEvents() {\n    eventsEngine.off(this._input(), this._getSearchEvent());\n    eventsEngine.off(this._input(), this._getSetFocusPolicyEvent());\n    this.callBase();\n  },\n  _searchHandler: function _searchHandler() {\n    if (!this._isMinSearchLengthExceeded()) {\n      this._searchCanceled();\n      return;\n    }\n    var searchTimeout = this.option(\"searchTimeout\");\n    if (searchTimeout) {\n      this._clearSearchTimer();\n      this._searchTimer = setTimeout(this._searchDataSource.bind(this), searchTimeout);\n    } else {\n      this._searchDataSource();\n    }\n  },\n  _searchCanceled: function _searchCanceled() {\n    this._clearSearchTimer();\n    if (this._needPassDataSourceToList()) {\n      this._filterDataSource(null);\n    }\n    this._refreshList();\n  },\n  _searchDataSource: function _searchDataSource() {\n    this._filterDataSource(this._searchValue());\n  },\n  _filterDataSource: function _filterDataSource(searchValue) {\n    this._clearSearchTimer();\n    var dataSource = this._dataSource;\n    dataSource.searchExpr(this.option(\"searchExpr\") || this._displayGetterExpr());\n    dataSource.searchOperation(this.option(\"searchMode\"));\n    dataSource.searchValue(searchValue);\n    return dataSource.load().done(this._dataSourceFiltered.bind(this, searchValue));\n  },\n  _clearFilter: function _clearFilter() {\n    var dataSource = this._dataSource;\n    dataSource && dataSource.searchValue() && dataSource.searchValue(null);\n  },\n  _dataSourceFiltered: function _dataSourceFiltered() {\n    this._refreshList();\n    this._refreshPopupVisibility();\n  },\n  _shouldOpenPopup: function _shouldOpenPopup() {\n    return this._hasItemsToShow();\n  },\n  _refreshPopupVisibility: function _refreshPopupVisibility() {\n    if (this.option(\"readOnly\") || !this._searchValue()) {\n      return;\n    }\n    var shouldOpenPopup = this._shouldOpenPopup();\n    if (shouldOpenPopup && !this._isFocused()) {\n      return;\n    }\n    this.option(\"opened\", shouldOpenPopup);\n    if (shouldOpenPopup) {\n      this._dimensionChanged();\n    }\n  },\n  _dataSourceChangedHandler: function _dataSourceChangedHandler(newItems) {\n    if (0 === this._dataSource.pageIndex()) {\n      this.option().items = newItems;\n    } else {\n      this.option().items = this.option().items.concat(newItems);\n    }\n  },\n  _hasItemsToShow: function _hasItemsToShow() {\n    var resultItems = this._dataSource && this._dataSource.items() || [];\n    var resultAmount = resultItems.length;\n    var isMinSearchLengthExceeded = this._needPassDataSourceToList();\n    return !!(isMinSearchLengthExceeded && resultAmount);\n  },\n  _clearSearchTimer: function _clearSearchTimer() {\n    clearTimeout(this._searchTimer);\n    delete this._searchTimer;\n  },\n  _popupShowingHandler: function _popupShowingHandler() {\n    this._dimensionChanged();\n  },\n  _dimensionChanged: function _dimensionChanged() {\n    this._popup && this._updatePopupDimensions();\n  },\n  _updatePopupDimensions: function _updatePopupDimensions() {\n    this._updatePopupWidth();\n    this._updatePopupHeight();\n  },\n  _updatePopupWidth: function _updatePopupWidth() {\n    this._setPopupOption(\"width\", this.$element().outerWidth() + this.option(\"popupWidthExtension\"));\n  },\n  _needPopupRepaint: function _needPopupRepaint() {\n    if (!this._dataSource) {\n      return false;\n    }\n    var currentPageIndex = this._dataSource.pageIndex(),\n      needRepaint = typeUtils.isDefined(this._pageIndex) && currentPageIndex <= this._pageIndex;\n    this._pageIndex = currentPageIndex;\n    return needRepaint;\n  },\n  _updatePopupHeight: function _updatePopupHeight() {\n    if (this._needPopupRepaint()) {\n      this._popup.repaint();\n    }\n    this._list && this._list.updateDimensions();\n  },\n  _getMaxHeight: function _getMaxHeight() {\n    var $element = this.$element(),\n      $customBoundaryContainer = this._$customBoundaryContainer,\n      offsetTop = $element.offset().top - ($customBoundaryContainer ? $customBoundaryContainer.offset().top : 0),\n      containerHeight = ($customBoundaryContainer || $(window)).outerHeight(),\n      maxHeight = Math.max(offsetTop, containerHeight - offsetTop - $element.outerHeight());\n    return Math.min(.5 * containerHeight, maxHeight);\n  },\n  _clean: function _clean() {\n    if (this._list) {\n      delete this._list;\n    }\n    this.callBase();\n  },\n  _dispose: function _dispose() {\n    this._clearSearchTimer();\n    this.callBase();\n  },\n  _setCollectionWidgetOption: function _setCollectionWidgetOption() {\n    this._setListOption.apply(this, arguments);\n  },\n  _setSubmitValue: function _setSubmitValue() {\n    var value = this.option(\"value\"),\n      submitValue = this._shouldUseDisplayValue(value) ? this._displayGetter(value) : value;\n    this._getSubmitElement().val(submitValue);\n  },\n  _shouldUseDisplayValue: function _shouldUseDisplayValue(value) {\n    return \"this\" === this.option(\"valueExpr\") && typeUtils.isObject(value);\n  },\n  _optionChanged: function _optionChanged(args) {\n    this._dataExpressionOptionChanged(args);\n    switch (args.name) {\n      case \"hoverStateEnabled\":\n      case \"focusStateEnabled\":\n        this._isDesktopDevice() && this._setListOption(args.name, args.value);\n        this.callBase(args);\n        break;\n      case \"items\":\n        if (!this.option(\"dataSource\")) {\n          this._processDataSourceChanging();\n        }\n        break;\n      case \"dataSource\":\n        this._processDataSourceChanging();\n        break;\n      case \"valueExpr\":\n        this._renderValue();\n        this._setListOption(\"keyExpr\", this._getCollectionKeyExpr());\n        break;\n      case \"displayExpr\":\n        this._renderValue();\n        this._setListOption(\"displayExpr\", this._displayGetterExpr());\n        break;\n      case \"searchMode\":\n        this._validateSearchMode();\n        break;\n      case \"minSearchLength\":\n        this._refreshList();\n        break;\n      case \"searchEnabled\":\n      case \"showDataBeforeSearch\":\n      case \"searchExpr\":\n        this._invalidate();\n        break;\n      case \"onContentReady\":\n        this._initContentReadyAction();\n        break;\n      case \"onSelectionChanged\":\n        this._initSelectionChangedAction();\n        break;\n      case \"onItemClick\":\n        this._initItemClickAction();\n        break;\n      case \"grouped\":\n      case \"groupTemplate\":\n      case \"wrapItemText\":\n      case \"noDataText\":\n        this._setListOption(args.name);\n        break;\n      case \"displayValue\":\n        this.option(\"text\", args.value);\n        break;\n      case \"itemTemplate\":\n      case \"searchTimeout\":\n      case \"popupWidthExtension\":\n        break;\n      case \"selectedItem\":\n        this._selectionChangedAction({\n          selectedItem: args.value\n        });\n        break;\n      default:\n        this.callBase(args);\n    }\n  }\n}).include(DataExpressionMixin, DataConverterMixin);\nregisterComponent(\"dxDropDownList\", DropDownList);\nmodule.exports = DropDownList;","map":null,"metadata":{},"sourceType":"script"}