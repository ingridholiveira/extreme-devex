{"ast":null,"code":"/**\r\n * DevExtreme (core/utils/resize_callbacks.js)\r\n * Version: 19.2.2\r\n * Build date: Tue Oct 01 2019\r\n *\r\n * Copyright (c) 2012 - 2019 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nvar windowUtils = require(\"./window\"),\n  domAdapter = require(\"../dom_adapter\"),\n  Callbacks = require(\"./callbacks\"),\n  readyCallbacks = require(\"./ready_callbacks\"),\n  callOnce = require(\"./call_once\");\nvar resizeCallbacks = function () {\n  var prevSize,\n    callbacks = Callbacks(),\n    originalCallbacksAdd = callbacks.add,\n    originalCallbacksRemove = callbacks.remove;\n  if (!windowUtils.hasWindow()) {\n    return callbacks;\n  }\n  var formatSize = function formatSize() {\n    var documentElement = domAdapter.getDocumentElement();\n    return {\n      width: documentElement.clientWidth,\n      height: documentElement.clientHeight\n    };\n  };\n  var handleResize = function handleResize() {\n    var now = formatSize();\n    if (now.width === prevSize.width && now.height === prevSize.height) {\n      return;\n    }\n    var changedDimension;\n    if (now.width === prevSize.width) {\n      changedDimension = \"height\";\n    }\n    if (now.height === prevSize.height) {\n      changedDimension = \"width\";\n    }\n    prevSize = now;\n    callbacks.fire(changedDimension);\n  };\n  var setPrevSize = callOnce(function () {\n    prevSize = formatSize();\n  });\n  var removeListener;\n  callbacks.add = function () {\n    var result = originalCallbacksAdd.apply(callbacks, arguments);\n    setPrevSize();\n    readyCallbacks.add(function () {\n      if (!removeListener && callbacks.has()) {\n        removeListener = domAdapter.listen(windowUtils.getWindow(), \"resize\", handleResize);\n      }\n    });\n    return result;\n  };\n  callbacks.remove = function () {\n    var result = originalCallbacksRemove.apply(callbacks, arguments);\n    if (!callbacks.has() && removeListener) {\n      removeListener();\n      removeListener = void 0;\n    }\n    return result;\n  };\n  return callbacks;\n}();\nmodule.exports = resizeCallbacks;","map":null,"metadata":{},"sourceType":"script"}